(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{6672:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/new-album",function(){return l(2581)}])},2901:function(e,t,l){"use strict";l.d(t,{o:function(){return s}});let s=(0,l(4529).Ue)()(e=>({currentSong:null,songs:null,user:null,playing:!1,playlists:null,setPlaying:t=>e(()=>({playing:t})),setCurrentSong:t=>e(()=>({currentSong:t})),setSongs:t=>e(()=>({songs:t})),setUser:t=>e(()=>({user:t})),setPlaylists:t=>e(()=>({playlists:t}))}))},1368:function(e,t,l){"use strict";l.d(t,{Z:function(){return m}});var s=l(5893),a=l(2901),n=l(992),r=l(5121),i=l(1664),u=l.n(i),c=l(1163),o=l(7294),d=()=>{let{user:e,setUser:t,setPlaylists:l}=(0,a.o)(),i=(0,c.useRouter)(),[d,x]=(0,o.useState)(""),[h,p]=(0,o.useState)(""),f=async e=>{if(e.preventDefault(),"/auth/register"!==i.asPath){await r.Z.post(n._e,{username:d,password:h},{withCredentials:!0}).then(async e=>{await r.Z.get(n.ar,{withCredentials:!0}).then(e=>{t(e.data),l(e.data.playlists),i.replace("/")}).catch(e=>{var t,l;console.log(e),alert(null==e?void 0:null===(l=e.response)||void 0===l?void 0:null===(t=l.data)||void 0===t?void 0:t.err)})}).catch(e=>{var t,l;console.log(e),alert(null==e?void 0:null===(l=e.response)||void 0===l?void 0:null===(t=l.data)||void 0===t?void 0:t.err)});return}await r.Z.post(n.Kd,{username:d,password:h},{withCredentials:!0}).then(async e=>{await r.Z.get(n.ar,{withCredentials:!0}).then(e=>{t(e.data),l(e.data.playlists),i.replace("/")}).catch(e=>{var t,l;alert(null==e?void 0:null===(l=e.response)||void 0===l?void 0:null===(t=l.data)||void 0===t?void 0:t.err)})}).catch(e=>{var t,l;alert(null==e?void 0:null===(l=e.response)||void 0===l?void 0:null===(t=l.data)||void 0===t?void 0:t.err)})};return(0,s.jsxs)("form",{onSubmit:f,className:"w-full flex flex-col items-start justify-start bg-gray-700 p-4 max-w-[600px] rounded-2xl gap-2",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,s.jsx)("label",{htmlFor:"username",className:"text-white",children:"Lietotājvārds"}),(0,s.jsx)("input",{type:"text",name:"username",id:"username",className:"",placeholder:"Lietotājvārds",value:d,onChange:e=>x(e.target.value)})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,s.jsx)("label",{htmlFor:"password",className:"text-white",children:"Parole"}),(0,s.jsx)("input",{type:"password",name:"password",id:"password",className:"",placeholder:"Parole",value:h,onChange:e=>p(e.target.value)})]}),(0,s.jsxs)("div",{className:"flex w-full gap-4 items-center justify-start mt-2",children:[(0,s.jsx)("button",{className:"bg-gray-800 border-2 border-pink-500 flex-1 py-3 max-w-[300px] rounded-full text-pink-500",type:"submit",children:"Pieslēgties"}),(0,s.jsx)(u(),{href:"/auth/register"!==i.asPath?"/auth/register":"/auth/login",className:"text-pink-500 underline",children:"/auth/register"!==i.asPath?"Reģistrēties":"Pieslēgties"})]})]})},x=l(8125),h=l(3436),p=l(1321),f=l(6055),m=e=>{let{children:t,title:l,description:i}=e,{user:u,setUser:m,setPlaylists:v,currentSong:g,playing:j,setPlaying:w}=(0,a.o)(),y=(0,o.useRef)(null),N=(0,c.useRouter)();return((0,o.useEffect)(()=>{u||(async()=>{await r.Z.get(n.ar,{withCredentials:!0}).then(e=>{v(e.data.playlists),m(e.data),N.replace("/")}).catch(e=>{var t,l;alert(null==e?void 0:null===(l=e.response)||void 0===l?void 0:null===(t=l.data)||void 0===t?void 0:t.err)})})()},[]),(0,o.useEffect)(()=>{j&&g&&setTimeout(()=>{y.current&&y.current.play()},1e3)},[j,g]),u)?(0,s.jsxs)("main",{className:"w-full flex flex-col items-center justify-start bg-gray-800 min-h-screen py-20",children:[g?(0,s.jsxs)("audio",{id:"song",ref:y,children:[(0,s.jsx)("source",{src:"/music/".concat(g.file_id,".mp3"),type:"audio/mp3"}),"Your browser does not support the audio element."]}):null,(0,s.jsxs)("div",{className:"w-full max-w-[1200px] flex flex-col px-4",children:[t,g?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center p-4 bg-gray-900 rounded-xl border mt-4 sticky bottom-0 z-20",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center  gap-4",children:[(0,s.jsx)("button",{children:(0,s.jsx)(x.Z,{className:"text-white h-8"})}),(0,s.jsx)("button",{onClick:()=>{w(!j),j&&y.current&&y.current.pause()},children:j?(0,s.jsx)(h.Z,{className:"text-white h-12"}):(0,s.jsx)(p.Z,{className:"text-white h-12"})}),(0,s.jsx)("button",{children:(0,s.jsx)(f.Z,{className:"text-white h-8"})})]}),(0,s.jsx)("p",{className:"text-pink-500 mt-2",children:g.title})]}):null]})]}):(0,s.jsx)("main",{className:"w-full flex flex-col items-center justify-center bg-gray-800 min-h-screen px-4",children:(0,s.jsx)(d,{})})}},2581:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return h}});var s=l(5893),a=l(2901),n=l(992),r=l(5121),i=l(1664),u=l.n(i),c=l(1163),o=l(7294),d=()=>{let{playlists:e,setPlaylists:t}=(0,a.o)(),l=(0,c.useRouter)(),[i,d]=(0,o.useState)(""),[x,h]=(0,o.useState)(""),p=async s=>{s.preventDefault(),await r.Z.post(n.he,{title:i,description:x},{withCredentials:!0}).then(s=>{t(e?[...e,s.data]:[s.data]),l.replace("/album/".concat(s.data.id))}).catch(e=>{var t,l;alert(null==e?void 0:null===(l=e.response)||void 0===l?void 0:null===(t=l.data)||void 0===t?void 0:t.err)})};return(0,s.jsx)("div",{className:"w-full flex items-center justify-center",children:(0,s.jsxs)("form",{onSubmit:p,className:"w-full flex flex-col items-start justify-start bg-gray-700 p-4 max-w-[600px] rounded-2xl gap-2",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,s.jsx)("label",{htmlFor:"title",className:"text-white",children:"Nosaukums"}),(0,s.jsx)("input",{type:"text",name:"title",id:"title",className:"",placeholder:"Nosaukums",value:i,onChange:e=>d(e.target.value)})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,s.jsx)("label",{htmlFor:"description",className:"text-white",children:"Apraksts"}),(0,s.jsx)("textarea",{name:"description",id:"description",className:"h-20 p-2",placeholder:"Apraksts",value:x,onChange:e=>h(e.target.value)})]}),(0,s.jsxs)("div",{className:"flex w-full gap-4 items-center justify-start mt-2",children:[(0,s.jsx)("button",{className:"bg-gray-800 border-2 border-pink-500 flex-1 py-3 max-w-[200px] rounded-full text-pink-500",type:"submit",children:"Izveidot"}),(0,s.jsx)(u(),{href:"/",className:"text-pink-500 underline",children:"Atpakaļ"})]})]})})},x=l(1368);function h(){return(0,s.jsx)(x.Z,{children:(0,s.jsx)(d,{})})}},992:function(e,t,l){"use strict";l.d(t,{Kd:function(){return r},Kq:function(){return o},Lx:function(){return n},_e:function(){return a},ar:function(){return i},bg:function(){return c},he:function(){return u}});let s="/api",a="".concat(s,"/user/login"),n="".concat(s,"/user/logout"),r="".concat(s,"/user/register"),i="".concat(s,"/user/check-for-login"),u="".concat(s,"/playlist"),c="".concat(s,"/song"),o="".concat(c,"/add-to-playlist")}},function(e){e.O(0,[876,316,888,774,179],function(){return e(e.s=6672)}),_N_E=e.O()}]);