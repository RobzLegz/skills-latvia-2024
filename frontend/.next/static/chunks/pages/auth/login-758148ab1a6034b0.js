(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[344],{163:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/login",function(){return s(6020)}])},2901:function(e,t,s){"use strict";s.d(t,{o:function(){return l}});let l=(0,s(4529).Ue)()(e=>({currentSong:null,songs:null,user:null,playing:!1,playlists:null,setPlaying:t=>e(()=>({playing:t})),setCurrentSong:t=>e(()=>({currentSong:t})),setSongs:t=>e(()=>({songs:t})),setUser:t=>e(()=>({user:t})),setPlaylists:t=>e(()=>({playlists:t}))}))},1368:function(e,t,s){"use strict";s.d(t,{Z:function(){return m}});var l=s(5893),a=s(2901),n=s(992),r=s(5121),i=s(1664),u=s.n(i),o=s(1163),c=s(7294),d=()=>{let{user:e,setUser:t,setPlaylists:s}=(0,a.o)(),i=(0,o.useRouter)(),[d,h]=(0,c.useState)(""),[x,f]=(0,c.useState)(""),p=async e=>{if(e.preventDefault(),"/auth/register"!==i.asPath){await r.Z.post(n._e,{username:d,password:x},{withCredentials:!0}).then(async e=>{await r.Z.get(n.ar,{withCredentials:!0}).then(e=>{t(e.data),s(e.data.playlists),i.replace("/")}).catch(e=>{var t,s;console.log(e),alert(null==e?void 0:null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.err)})}).catch(e=>{var t,s;console.log(e),alert(null==e?void 0:null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.err)});return}await r.Z.post(n.Kd,{username:d,password:x},{withCredentials:!0}).then(async e=>{await r.Z.get(n.ar,{withCredentials:!0}).then(e=>{t(e.data),s(e.data.playlists),i.replace("/")}).catch(e=>{var t,s;alert(null==e?void 0:null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.err)})}).catch(e=>{var t,s;alert(null==e?void 0:null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.err)})};return(0,l.jsxs)("form",{onSubmit:p,className:"w-full flex flex-col items-start justify-start bg-gray-700 p-4 max-w-[600px] rounded-2xl gap-2",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,l.jsx)("label",{htmlFor:"username",className:"text-white",children:"Lietotājvārds"}),(0,l.jsx)("input",{type:"text",name:"username",id:"username",className:"",placeholder:"Lietotājvārds",value:d,onChange:e=>h(e.target.value)})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,l.jsx)("label",{htmlFor:"password",className:"text-white",children:"Parole"}),(0,l.jsx)("input",{type:"password",name:"password",id:"password",className:"",placeholder:"Parole",value:x,onChange:e=>f(e.target.value)})]}),(0,l.jsxs)("div",{className:"flex w-full gap-4 items-center justify-start mt-2",children:[(0,l.jsx)("button",{className:"bg-gray-800 border-2 border-pink-500 flex-1 py-3 max-w-[300px] rounded-full text-pink-500",type:"submit",children:"Pieslēgties"}),(0,l.jsx)(u(),{href:"/auth/register"!==i.asPath?"/auth/register":"/auth/login",className:"text-pink-500 underline",children:"/auth/register"!==i.asPath?"Reģistrēties":"Pieslēgties"})]})]})},h=s(8125),x=s(3436),f=s(1321),p=s(6055),m=e=>{let{children:t,title:s,description:i}=e,{user:u,setUser:m,setPlaylists:g,currentSong:v,playing:w,setPlaying:j}=(0,a.o)(),y=(0,c.useRef)(null),N=(0,o.useRouter)();return((0,c.useEffect)(()=>{u||(async()=>{await r.Z.get(n.ar,{withCredentials:!0}).then(e=>{g(e.data.playlists),m(e.data),N.replace("/")}).catch(e=>{var t,s;alert(null==e?void 0:null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.err)})})()},[]),(0,c.useEffect)(()=>{w&&v&&setTimeout(()=>{y.current&&y.current.play()},1e3)},[w,v]),u)?(0,l.jsxs)("main",{className:"w-full flex flex-col items-center justify-start bg-gray-800 min-h-screen py-20",children:[v?(0,l.jsxs)("audio",{id:"song",ref:y,children:[(0,l.jsx)("source",{src:"/music/".concat(v.file_id,".mp3"),type:"audio/mp3"}),"Your browser does not support the audio element."]}):null,(0,l.jsxs)("div",{className:"w-full max-w-[1200px] flex flex-col px-4",children:[t,v?(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center p-4 bg-gray-900 rounded-xl border mt-4 sticky bottom-0 z-20",children:[(0,l.jsxs)("div",{className:"flex items-center justify-center  gap-4",children:[(0,l.jsx)("button",{children:(0,l.jsx)(h.Z,{className:"text-white h-8"})}),(0,l.jsx)("button",{onClick:()=>{j(!w),w&&y.current&&y.current.pause()},children:w?(0,l.jsx)(x.Z,{className:"text-white h-12"}):(0,l.jsx)(f.Z,{className:"text-white h-12"})}),(0,l.jsx)("button",{children:(0,l.jsx)(p.Z,{className:"text-white h-8"})})]}),(0,l.jsx)("p",{className:"text-pink-500 mt-2",children:v.title})]}):null]})]}):(0,l.jsx)("main",{className:"w-full flex flex-col items-center justify-center bg-gray-800 min-h-screen px-4",children:(0,l.jsx)(d,{})})}},6020:function(e,t,s){"use strict";s.r(t);var l=s(1368);t.default=l.Z},992:function(e,t,s){"use strict";s.d(t,{Kd:function(){return r},Kq:function(){return c},Lx:function(){return n},_e:function(){return a},ar:function(){return i},bg:function(){return o},he:function(){return u}});let l="/api",a="".concat(l,"/user/login"),n="".concat(l,"/user/logout"),r="".concat(l,"/user/register"),i="".concat(l,"/user/check-for-login"),u="".concat(l,"/playlist"),o="".concat(l,"/song"),c="".concat(o,"/add-to-playlist")}},function(e){e.O(0,[876,316,888,774,179],function(){return e(e.s=163)}),_N_E=e.O()}]);