"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[301],{5705:function(e,t,l){l.d(t,{N:function(){return m},Z:function(){return f}});var a=l(5893),s=l(7294),n=l(2901),r=l(992);let i=s.forwardRef(function({title:e,titleId:t,...l},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},l),e?s.createElement("title",{id:t},e):null,s.createElement("path",{d:"M4.75 2A2.75 2.75 0 0 0 2 4.75v6.5A2.75 2.75 0 0 0 4.75 14h3a2.75 2.75 0 0 0 2.75-2.75v-.5a.75.75 0 0 0-1.5 0v.5c0 .69-.56 1.25-1.25 1.25h-3c-.69 0-1.25-.56-1.25-1.25v-6.5c0-.69.56-1.25 1.25-1.25h3C8.44 3.5 9 4.06 9 4.75v.5a.75.75 0 0 0 1.5 0v-.5A2.75 2.75 0 0 0 7.75 2h-3Z"}),s.createElement("path",{d:"M8.03 6.28a.75.75 0 0 0-1.06-1.06L4.72 7.47a.75.75 0 0 0 0 1.06l2.25 2.25a.75.75 0 1 0 1.06-1.06l-.97-.97h7.19a.75.75 0 0 0 0-1.5H7.06l.97-.97Z"}))}),o=s.forwardRef(function({title:e,titleId:t,...l},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},l),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}),c=s.forwardRef(function({title:e,titleId:t,...l},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},l),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}),s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.91 11.672a.375.375 0 0 1 0 .656l-5.603 3.113a.375.375 0 0 1-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112Z"}))}),d=s.forwardRef(function({title:e,titleId:t,...l},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},l),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0ZM3.75 12h.007v.008H3.75V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm-.375 5.25h.007v.008H3.75v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))});var u=l(5121),x=l(1664),h=l.n(x),f=()=>{let{user:e,playlists:t,songs:l,setSongs:c,setUser:d,setPlaying:x,setPlaylists:f,setCurrentSong:p}=(0,n.o)();(0,s.useEffect)(()=>{l||(async()=>{await u.Z.get(r.bg,{withCredentials:!0}).then(e=>{c(e.data)}).catch(e=>{var t,l;alert(null==e?void 0:null===(l=e.response)||void 0===l?void 0:null===(t=l.data)||void 0===t?void 0:t.err)})})()},[]);let v=async()=>{await u.Z.post(r.Lx,{},{withCredentials:!0}).then(e=>{d(null),p(null),c(null),x(!1),f(null)})};return(0,a.jsxs)("section",{className:"flex flex-col w-full gap-4 ",children:[(0,a.jsxs)("div",{className:"w-full p-4 bg-gray-900 rounded-xl border flex items-center justify-between",children:[(0,a.jsxs)("h1",{className:"text-4xl text-white",children:["Sveicināts ",null==e?void 0:e.username,"!"]}),(0,a.jsx)("button",{onClick:v,children:(0,a.jsx)(i,{className:"text-pink-500 h-6"})})]}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col min-h-80 bg-gray-900 w-full max-w-[250px] border rounded-xl overflow-hidden",children:[(0,a.jsxs)("div",{className:"w-full h-12 bg-gray-900/90 border-b text-white px-4 flex items-center justify-between",children:[(0,a.jsx)("p",{children:"Albumi"}),(0,a.jsx)(h(),{href:"/new-album",children:(0,a.jsx)(o,{className:"text-white h-5"})})]}),(null==t?void 0:t.length)?(0,a.jsx)("div",{className:"flex flex-col text-white",children:t.map((e,t)=>(0,a.jsx)(h(),{href:"/album/".concat(e.id),className:"flex w-full gap-1 items-center justify-start p-2 hover:bg-gray-800 min-h-12",children:(0,a.jsxs)("div",{className:"flex-1 flex flex-col items-start justify-center overflow-hidden",children:[(0,a.jsx)("p",{children:e.title}),(0,a.jsx)("small",{className:"truncate w-full text-gray-400",children:e.description})]})},t))}):(0,a.jsx)("div",{className:"text-center p-4 text-gray-100",children:(0,a.jsx)("p",{children:"Pagaidām nav neviena albuma"})})]}),(0,a.jsxs)("div",{className:"flex flex-col min-h-80 bg-gray-900 flex-1 rounded-xl border overflow-hidden",children:[(0,a.jsx)("div",{className:"w-full h-12 bg-gray-900/90 border-b text-white px-4 flex items-center justify-between",children:(0,a.jsx)("p",{children:"Dziesmas"})}),(null==l?void 0:l.length)?(0,a.jsx)("div",{className:"flex flex-col w-full",children:l.map((e,t)=>(0,s.createElement)(m,{...e,key:t}))}):(0,a.jsx)("div",{className:""})]})]})]})};let m=e=>{let{...t}=e,{currentSong:l,setCurrentSong:i,playlists:o,setPlaylists:x}=(0,n.o)(),[h,f]=(0,s.useState)(!1),[m,p]=(0,s.useState)([]),v=async()=>{await u.Z.post(r.Kq,{songId:t.id,playlistIds:m}).then(e=>{p([]),f(!1),x(e.data.playlists)}).catch(e=>{var t,l;alert(null==e?void 0:null===(l=e.response)||void 0===l?void 0:null===(t=l.data)||void 0===t?void 0:t.err)})};return(0,a.jsxs)("div",{className:"w-full min-h-12 flex items-center justify-start text-gray-200 px-2 gap-4 hover:bg-gray-800 group",children:[h?(0,a.jsx)("div",{className:"w-full h-full absolute top-0 left-0 z-50 bg-black/30 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"w-full max-w-[600px] p-4 rounded-md bg-gray-800 border gap-4 flex flex-col",children:[(0,a.jsx)("strong",{children:"Pievienot albumiem"}),(0,a.jsxs)("select",{onChange:e=>e.target.value?p(Array.from(new Set([...m,Number(e.target.value)]))):null,children:[(0,a.jsx)("option",{value:""}),null==o?void 0:o.map((e,t)=>(0,a.jsx)("option",{value:e.id,children:e.title},t))]}),(0,a.jsx)("div",{className:"flex gap-2 flex-wrap",children:m.map((e,t)=>{var l;return(0,a.jsxs)("p",{className:"text-pink-500 hover:line-through cursor-pointer",onClick:()=>p(m.filter(t=>t!==e)),children:["#",null==o?void 0:null===(l=o.find(t=>t.id===e))||void 0===l?void 0:l.title]},t)})}),(0,a.jsxs)("div",{className:"flex w-full gap-4 items-center justify-start mt-2",children:[(0,a.jsx)("button",{className:"bg-gray-800 border-2 border-pink-500 flex-1 py-3 max-w-[200px] rounded-full text-pink-500",onClick:v,children:"Saglabāt"}),(0,a.jsx)("button",{className:"text-pink-500 underline",onClick:()=>{p([]),f(!1)},children:"Atpakaļ"})]})]})}):null,(0,a.jsxs)("button",{className:"flex flex-1 h-full items-center justify-between",onClick:()=>i(t),children:[(0,a.jsx)("p",{className:"text-white",children:t.title}),(0,a.jsx)(c,{className:"h-6 text-pink-500 ".concat((null==l?void 0:l.id)!==t.id?"hidden group-hover:block":"")})]}),(0,a.jsx)("button",{className:"z-10",onClick:()=>{f(!0),p(null==o?void 0:o.filter(e=>e.songs.some(e=>e.songId===t.id)).map(e=>e.id))},children:(0,a.jsx)(d,{className:"text-white h-6"})})]})}},2901:function(e,t,l){l.d(t,{o:function(){return a}});let a=(0,l(4529).Ue)()(e=>({currentSong:null,songs:null,user:null,playing:!1,playlists:null,setPlaying:t=>e(()=>({playing:t})),setCurrentSong:t=>e(()=>({currentSong:t})),setSongs:t=>e(()=>({songs:t})),setUser:t=>e(()=>({user:t})),setPlaylists:t=>e(()=>({playlists:t}))}))},1368:function(e,t,l){l.d(t,{Z:function(){return p}});var a=l(5893),s=l(2901),n=l(992),r=l(5121),i=l(1664),o=l.n(i),c=l(1163),d=l(7294),u=()=>{let{user:e,setUser:t,setPlaylists:l}=(0,s.o)(),i=(0,c.useRouter)(),[u,x]=(0,d.useState)(""),[h,f]=(0,d.useState)(""),m=async e=>{if(e.preventDefault(),"/auth/register"!==i.asPath){await r.Z.post(n._e,{username:u,password:h},{withCredentials:!0}).then(async e=>{await r.Z.get(n.ar,{withCredentials:!0}).then(e=>{t(e.data),l(e.data.playlists),i.replace("/")}).catch(e=>{var t,l;console.log(e),alert(null==e?void 0:null===(l=e.response)||void 0===l?void 0:null===(t=l.data)||void 0===t?void 0:t.err)})}).catch(e=>{var t,l;console.log(e),alert(null==e?void 0:null===(l=e.response)||void 0===l?void 0:null===(t=l.data)||void 0===t?void 0:t.err)});return}await r.Z.post(n.Kd,{username:u,password:h},{withCredentials:!0}).then(async e=>{await r.Z.get(n.ar,{withCredentials:!0}).then(e=>{t(e.data),l(e.data.playlists),i.replace("/")}).catch(e=>{var t,l;alert(null==e?void 0:null===(l=e.response)||void 0===l?void 0:null===(t=l.data)||void 0===t?void 0:t.err)})}).catch(e=>{var t,l;alert(null==e?void 0:null===(l=e.response)||void 0===l?void 0:null===(t=l.data)||void 0===t?void 0:t.err)})};return(0,a.jsxs)("form",{onSubmit:m,className:"w-full flex flex-col items-start justify-start bg-gray-700 p-4 max-w-[600px] rounded-2xl gap-2",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,a.jsx)("label",{htmlFor:"username",className:"text-white",children:"Lietotājvārds"}),(0,a.jsx)("input",{type:"text",name:"username",id:"username",className:"",placeholder:"Lietotājvārds",value:u,onChange:e=>x(e.target.value)})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,a.jsx)("label",{htmlFor:"password",className:"text-white",children:"Parole"}),(0,a.jsx)("input",{type:"password",name:"password",id:"password",className:"",placeholder:"Parole",value:h,onChange:e=>f(e.target.value)})]}),(0,a.jsxs)("div",{className:"flex w-full gap-4 items-center justify-start mt-2",children:[(0,a.jsx)("button",{className:"bg-gray-800 border-2 border-pink-500 flex-1 py-3 max-w-[300px] rounded-full text-pink-500",type:"submit",children:"Pieslēgties"}),(0,a.jsx)(o(),{href:"/auth/register"!==i.asPath?"/auth/register":"/auth/login",className:"text-pink-500 underline",children:"/auth/register"!==i.asPath?"Reģistrēties":"Pieslēgties"})]})]})},x=l(8125),h=l(3436),f=l(1321),m=l(6055),p=e=>{let{children:t,title:l,description:i}=e,{user:o,setUser:p,setPlaylists:v,currentSong:g,playing:w,setPlaying:j}=(0,s.o)(),b=(0,d.useRef)(null),y=(0,c.useRouter)();return((0,d.useEffect)(()=>{o||(async()=>{await r.Z.get(n.ar,{withCredentials:!0}).then(e=>{v(e.data.playlists),p(e.data),y.replace("/")}).catch(e=>{var t,l;alert(null==e?void 0:null===(l=e.response)||void 0===l?void 0:null===(t=l.data)||void 0===t?void 0:t.err)})})()},[]),(0,d.useEffect)(()=>{w&&g&&setTimeout(()=>{b.current&&b.current.play()},1e3)},[w,g]),o)?(0,a.jsxs)("main",{className:"w-full flex flex-col items-center justify-start bg-gray-800 min-h-screen py-20",children:[g?(0,a.jsxs)("audio",{id:"song",ref:b,children:[(0,a.jsx)("source",{src:"/music/".concat(g.file_id,".mp3"),type:"audio/mp3"}),"Your browser does not support the audio element."]}):null,(0,a.jsxs)("div",{className:"w-full max-w-[1200px] flex flex-col px-4",children:[t,g?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center p-4 bg-gray-900 rounded-xl border mt-4 sticky bottom-0 z-20",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center  gap-4",children:[(0,a.jsx)("button",{children:(0,a.jsx)(x.Z,{className:"text-white h-8"})}),(0,a.jsx)("button",{onClick:()=>{j(!w),w&&b.current&&b.current.pause()},children:w?(0,a.jsx)(h.Z,{className:"text-white h-12"}):(0,a.jsx)(f.Z,{className:"text-white h-12"})}),(0,a.jsx)("button",{children:(0,a.jsx)(m.Z,{className:"text-white h-8"})})]}),(0,a.jsx)("p",{className:"text-pink-500 mt-2",children:g.title})]}):null]})]}):(0,a.jsx)("main",{className:"w-full flex flex-col items-center justify-center bg-gray-800 min-h-screen px-4",children:(0,a.jsx)(u,{})})}},992:function(e,t,l){l.d(t,{Kd:function(){return r},Kq:function(){return d},Lx:function(){return n},_e:function(){return s},ar:function(){return i},bg:function(){return c},he:function(){return o}});let a="/api",s="".concat(a,"/user/login"),n="".concat(a,"/user/logout"),r="".concat(a,"/user/register"),i="".concat(a,"/user/check-for-login"),o="".concat(a,"/playlist"),c="".concat(a,"/song"),d="".concat(c,"/add-to-playlist")}}]);